<?php

/**
 * @file
 * install up1_pages_personnelles.
 */

use Drupal\Core\Field\BaseFieldDefinition;
use Drupal\Core\StringTranslation\TranslatableMarkup;

/**
 * Add new fields to micro site entity.
 */
function up1_pages_personnelles_update_8001(&$sandbox) {
  $ec_enabled = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Enable page unité de recherche Enseignants-Chercheurs. '))
    ->setDescription(t('Enables the list of all "Enseignants-Chercheurs" working in this structure. '))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $doc_enabled = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Enable page unité de recherche Doctorants. '))
    ->setDescription(t('Enables the list of all "Doctorants" working in this structure. '))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);
  $definition_manager = \Drupal::entityDefinitionUpdateManager();

  $definition_manager->installFieldStorageDefinition('ec_enabled', 'site', 'site', $ec_enabled);
  $definition_manager->installFieldStorageDefinition('doc_enabled', 'site', 'site', $doc_enabled);
}

function up1_pages_personnelles_update_8002(&$sandbox) {
  $trombi_ec_enable = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Enable trombinoscope for EC'))
    ->setDescription(t('List of all ECs displayed as trombinoscope.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $supannEntite_pedagogy = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "supannEntite pedagogy" on trombinoscope'))
    ->setDescription(t('See label of the "UFR" on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $supannEntite_research = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "supannEntite research" on trombinoscope'))
    ->setDescription(t('See label of the "labo de rattachement" on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $discipline_enseignement = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "discipline" on trombinoscope'))
    ->setDescription(t('See "discipline d\'enseignement" on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $skills_lists = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "skills" on trombinoscope'))
    ->setDescription(t('See "skills" list on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $supannRole = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "supannRole" on trombinoscope'))
    ->setDescription(t('See fonction on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $about_me = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Show "about me" on trombinoscope'))
    ->setDescription(t('See about me section on trombinoscope card.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $definition_manager = \Drupal::entityDefinitionUpdateManager();
  $definition_manager->installFieldStorageDefinition('trombi_ec_enable', 'site', 'site', $trombi_ec_enable);
  $definition_manager->installFieldStorageDefinition('supannEntite_pedagogy', 'site', 'site', $supannEntite_pedagogy);
  $definition_manager->installFieldStorageDefinition('supannEntite_research', 'site', 'site', $supannEntite_research);
  $definition_manager->installFieldStorageDefinition('discipline_enseignement', 'site', 'site', $discipline_enseignement);
  $definition_manager->installFieldStorageDefinition('skills_lists', 'site', 'site', $skills_lists);
  $definition_manager->installFieldStorageDefinition('supannRole', 'site', 'site', $supannRole);
  $definition_manager->installFieldStorageDefinition('about_me', 'site', 'site', $about_me);
}

/**
 * Add SupannConsentement field.
 */
function up1_pages_personnelles_update_8003(&$sandbox) {
  $supannConsentement = BaseFieldDefinition::create('string')
    ->setLabel(t('supannConsentement'))
    ->setDescription(t('Value of supannConsentement field in ldap for this grouper group.'))
    ->setSettings([
      'max_length' => 50,
      'text_processing' => 0,
    ])
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $definition_manager = \Drupal::entityDefinitionUpdateManager();
  $definition_manager->installFieldStorageDefinition('supannConsentement', 'site', 'site', $supannConsentement);
}

function up1_pages_personnelles_update_8004(){
  $trombi_students_enable = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Enable trombinoscope for students'))
    ->setDescription(t('List of all students displayed as trombinoscope.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $definition_manager = \Drupal::entityDefinitionUpdateManager();
  $definition_manager->installFieldStorageDefinition('trombi_students_enable', 'site', 'site', $trombi_students_enable);
}

/**
 * Uninstall trombi_students_enable field.
 */
function up1_pages_personnelles_update_8005(&$sandbox) {
  $update_manager = \Drupal::entityDefinitionUpdateManager();
  $update_manager->uninstallFieldStorageDefinition($update_manager->getFieldStorageDefinition('trombi_students_enable', 'site'));
}

/**
 * Install trombi_students_enable field.
 */
function up1_pages_personnelles_update_8006(&$sandbox){
  $trombi_students_enable = BaseFieldDefinition::create('boolean')
    ->setLabel(t('Enable trombinoscope for students'))
    ->setDescription(t('List of all students displayed as trombinoscope.'))
    ->setDefaultValue(FALSE)
    ->setRevisionable(TRUE);

  $definition_manager = \Drupal::entityDefinitionUpdateManager();
  $definition_manager->installFieldStorageDefinition('trombi_students_enable', 'site', 'site', $trombi_students_enable);
}